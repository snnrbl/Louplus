/********************************************************************************
 * Copyright (C) 2018 Ericsson and others.
 *
 * This program and the accompanying materials are made available under the
 * terms of the Eclipse Public License v. 2.0 which is available at
 * http://www.eclipse.org/legal/epl-2.0.
 *
 * This Source Code may also be made available under the following Secondary
 * Licenses when the conditions for such availability set forth in the Eclipse
 * Public License v. 2.0 are satisfied: GNU General Public License, version 2
 * with the GNU Classpath Exception which is available at
 * https://www.gnu.org/software/classpath/license.html.
 *
 * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0
 ********************************************************************************/
import React = require('react');
import { CommandRegistry, Emitter, Event } from '@theia/core/lib/common';
import { ReactWidget } from '@theia/core/lib/browser/widgets/react-widget';
import { KeybindingRegistry, Message } from '@theia/core/lib/browser';
import { KeymapsParser } from './keymaps-parser';
import { KeymapsService, KeybindingJson } from './keymaps-service';
/**
 * Representation of a keybinding item for the view.
 */
export interface KeybindingItem {
    /**
     * The id of the command.
     */
    id: string;
    /**
     * The human-readable label of the command.
     */
    command: string;
    /**
     * The keybinding of the command.
     */
    keybinding?: string;
    /**
     * The context / when closure of the command.
     */
    context?: string;
    /**
     * The source of the command.
     */
    source?: string;
}
/**
 * Representation of an individual table cell.
 */
export interface CellData {
    /**
     * The cell value.
     */
    value: string;
    /**
     * Indicates if a cell's value is currently highlighted.
     */
    highlighted: boolean;
}
export declare class KeybindingWidget extends ReactWidget {
    protected readonly commandRegistry: CommandRegistry;
    protected readonly keybindingRegistry: KeybindingRegistry;
    protected readonly keymapsParser: KeymapsParser;
    protected readonly keymapsService: KeymapsService;
    protected items: KeybindingItem[];
    static readonly ID = "keybindings.view.widget";
    static readonly LABEL = "Keyboard Shortcuts";
    /**
     * The current user search query.
     */
    protected query: string;
    /**
     * The regular expression used to extract values between fuzzy results.
     */
    protected readonly regexp: RegExp;
    protected readonly keybindingSeparator: RegExp;
    /**
     * The fuzzy search options.
     * The `pre` and `post` options are used to wrap fuzzy matches.
     */
    protected readonly fuzzyOptions: {
        pre: string;
        post: string;
    };
    protected readonly onDidUpdateEmitter: Emitter<void>;
    readonly onDidUpdate: Event<void>;
    protected readonly searchKeybindings: () => void;
    protected init(): void;
    /**
     * Determine if there currently is a search term.
     * @returns `true` if a search term is present.
     */
    hasSearch(): boolean;
    /**
     * Clear the search and reset the view.
     */
    clearSearch(): void;
    protected onActivateRequest(msg: Message): void;
    /**
     * Perform a search based on the user's search query.
     */
    protected doSearchKeybindings(): void;
    /**
     * Get the search input if available.
     * @returns the search input if available.
     */
    protected findSearchField(): HTMLInputElement | null;
    /**
     * Set the focus the search input field if available.
     */
    protected focusInputField(): void;
    /**
     * Render the view.
     */
    protected render(): React.ReactNode;
    /**
     * Render the search container with the search input.
     */
    protected renderSearch(): React.ReactNode;
    /**
     * Render the warning message when no search results are found.
     */
    protected renderMessage(): React.ReactNode;
    /**
     * Render the keybindings table.
     */
    protected renderTable(): React.ReactNode;
    /**
     * Render the table rows.
     */
    protected renderRows(): React.ReactNode;
    /**
     * Render the actions container with action icons.
     * @param item {KeybindingItem} the keybinding item for the row.
     */
    protected renderActions(item: KeybindingItem): React.ReactNode;
    /**
     * Render the edit action used to update a keybinding.
     * @param item {KeybindingItem} the keybinding item for the row.
     */
    protected renderEdit(item: KeybindingItem): React.ReactNode;
    /**
     * Render the reset action to reset the custom keybinding.
     * Only visible if a keybinding has a `user` scope.
     * @param item {KeybindingItem} the keybinding item for the row.
     */
    protected renderReset(item: KeybindingItem): React.ReactNode;
    /**
     * Render the keybinding.
     * @param keybinding {string} the keybinding value.
     */
    protected renderKeybinding(keybinding: string): React.ReactNode;
    /**
     * Get the list of keybinding items.
     *
     * @returns the list of keybinding items.
     */
    protected getItems(): KeybindingItem[];
    /**
     * Compare two strings.
     * @param a {string | undefined} the first string.
     * @param b {string | undefined} the second string.
     */
    protected compareItem(a: string | undefined, b: string | undefined): number;
    /**
     * Determine if the keybinding currently exists in a user's `keymaps.json`.
     *
     * @returns `true` if the keybinding exists.
     */
    protected keybindingExistsInJson(keybindings: KeybindingJson[], command: string): boolean;
    /**
     * Prompt users to update the keybinding for the given command.
     * @param item {KeybindingItem} the keybinding item.
     */
    protected editKeybinding(item: KeybindingItem): void;
    /**
     * Prompt users for confirmation before resetting.
     * @param command {string} the command label.
     *
     * @returns a Promise which resolves to `true` if a user accepts resetting.
     */
    protected confirmResetKeybinding(command: string): Promise<boolean>;
    /**
     * Reset the keybinding to its default value.
     * @param item {KeybindingItem} the keybinding item.
     */
    protected resetKeybinding(item: KeybindingItem): Promise<void>;
    /**
     * Validate the provided keybinding value against its previous value.
     * @param command {string} the command label.
     * @param oldKeybinding {string} the old keybinding value.
     * @param keybinding {string} the new keybinding value.
     *
     * @returns the end user message to display.
     */
    protected validateKeybinding(command: string, oldKeybinding: string, keybinding: string): string;
    /**
     * Build the cell data with highlights if applicable.
     * @param raw {string} the raw cell value.
     *
     * @returns the list of cell data.
     */
    protected buildCellData(raw: string): CellData[];
    /**
     * Render the fuzzy representation of a matched result.
     * @param property {string} one of the `KeybindingItem` properties.
     */
    protected renderMatchedData(property: string): React.ReactNode;
    /**
     * Render the raw value of a item without fuzzy highlighting.
     * @param property {string} one of the `KeybindingItem` properties.
     */
    protected getRawValue(property: string): string;
}
//# sourceMappingURL=keybindings-widget.d.ts.map